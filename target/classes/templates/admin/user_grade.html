<!DOCTYPE html>
<!--suppress ALL-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link th:href="@{/assets/css/bootstrap.min.css}" rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <link th:href="@{/assets/css/codemirror.css}" rel="stylesheet">
    <link th:href="@{/assets/css/ace.min.css}" rel="stylesheet"/>
    <link th:href="@{/assets/css/font-awesome.min.css}" rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{//at.alicdn.com/t/font_2331770_l8w8fq3nkma.css}">
    <script th:src="@{/js/jquery-1.9.1.min.js}"></script>
    <script th:src="@{/assets/js/typeahead-bs2.min.js}"></script>
    <script th:src="@{/js/lrtk.js}" type="text/javascript"></script>
    <script th:src="@{/assets/js/jquery.dataTables.min.js}"></script>
    <script th:src="@{/assets/js/jquery.dataTables.bootstrap.js}"></script>
    <script th:src="@{/assets/layer/layer.js}" type="text/javascript"></script>
    <script th:src="@{/assets/dist/echarts.js}"></script>
    <title>会员等级</title>
</head>
<body>
<div class="grading_style">
    <div id="category">
        <div id="scrollsidebar" class="left_Treeview">
            <div class="show_btn" id="rightArrow"><span></span></div>
            <div class="widget-box side_content">
                <div class="side_title"><a title="隐藏" class="close_btn"><span></span></a></div>
                <div class="side_list">
                    <div class="widget-header header-color-green2">
                        <h4 class="lighter smaller">会员等级</h4>
                    </div>
                    <div class="widget-body">
                        <ul class="b_P_Sort_list">
                            <li>
                                <svg t="1612009567823" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5639" width="16" height="16"><path d="M293.172603 530.235616c25.249315 0 50.49863-5.610959 74.345205-18.235616 16.832877-8.416438 23.846575-29.457534 15.430137-47.693151-8.416438-16.832877-29.457534-23.846575-47.69315-15.430137-12.624658 7.013699-26.652055 9.819178-42.082192 9.819178-50.49863 0-91.178082-40.679452-91.178082-91.178082s40.679452-91.178082 91.178082-91.178082c5.610959 0 12.624658 0 18.235616 1.40274 8.416438 1.40274 16.832877 0 23.846576-4.208219-5.610959 16.832877-8.416438 35.068493-8.416439 54.706849 0 103.80274 84.164384 186.564384 186.564384 186.564383S701.369863 432.043836 701.369863 328.241096c0-21.041096-4.208219-40.679452-9.819178-60.317808 8.416438 8.416438 19.638356 11.221918 32.263014 9.819178 5.610959-1.40274 12.624658-1.40274 18.235616-1.40274 50.49863 0 91.178082 40.679452 91.178082 91.178082s-40.679452 91.178082-91.178082 91.178082c-15.430137 0-29.457534-2.805479-42.082192-9.819178-16.832877-8.416438-37.873973-1.40274-47.69315 15.430137-8.416438 16.832877-1.40274 37.873973 15.430137 47.693151 22.443836 11.221918 47.693151 18.235616 74.345205 18.235616 89.775342 0 161.315068-72.942466 161.315069-161.315068s-72.942466-161.315068-161.315069-161.315069c-11.221918 0-22.443836 1.40274-32.263014 2.80548-16.832877 2.805479-28.054795 18.235616-28.054794 35.068493-30.860274-60.317808-93.983562-102.4-166.926028-102.4-68.734247 0-129.052055 37.873973-161.315068 93.983562-2.805479-12.624658-12.624658-22.443836-26.652055-25.249315-11.221918-2.805479-21.041096-2.805479-32.263014-2.80548-89.775342 0-161.315068 72.942466-161.315068 161.315069s70.136986 159.912329 159.912329 159.912328z m220.230137-318.421917c64.526027 0 116.427397 51.90137 116.427397 116.427397s-51.90137 116.427397-116.427397 116.427397-116.427397-51.90137-116.427398-116.427397 51.90137-116.427397 116.427398-116.427397zM740.646575 533.041096c-11.221918 0-22.443836 0-33.665753 1.40274-19.638356 2.805479-32.263014 19.638356-30.860274 39.276712 0 1.40274 0 2.805479 1.40274 4.208219-47.693151-28.054795-103.80274-44.887671-164.120548-44.887671-57.512329 0-110.816438 15.430137-157.10685 40.679452 2.805479-19.638356-11.221918-36.471233-30.860274-39.276712-9.819178-1.40274-21.041096-1.40274-32.263013-1.40274C140.273973 533.041096 16.832877 656.482192 16.832877 807.978082c0 19.638356 15.430137 35.068493 35.068493 35.068493s35.068493-15.430137 35.068493-35.068493c0-113.621918 92.580822-206.20274 206.20274-206.20274 7.013699 0 12.624658 0 19.638356 1.40274-74.345205 58.915068-122.038356 150.093151-122.038356 252.493151 0 19.638356 15.430137 35.068493 35.068493 35.068493s35.068493-15.430137 35.068493-35.068493c0-140.273973 113.621918-253.89589 253.89589-253.895891 140.273973 0 253.89589 113.621918 253.895891 253.895891 0 19.638356 15.430137 35.068493 35.068493 35.068493s35.068493-15.430137 35.068493-35.068493c0-102.4-47.693151-193.578082-122.038356-252.493151 8.416438-1.40274 16.832877-1.40274 25.249315-1.40274 113.621918 0 206.20274 92.580822 206.20274 206.20274 0 19.638356 15.430137 35.068493 35.068493 35.068493s35.068493-15.430137 35.068493-35.068493C1016.986301 656.482192 893.545205 533.041096 740.646575 533.041096z" p-id="5640" fill="#515151"></path></svg>
                                <a th:href="@{/admin/grade}">全部</a></li>
                            <li>
                                <svg t="1612008953510" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2504" width="16" height="16"><path d="M373.76 567.488a256 256 0 1 1 276.48 0c161.792 56.96 277.76 211.2 277.76 392.512h-64a352 352 0 0 0-704 0h-64a416.192 416.192 0 0 1 277.76-392.512zM512 544a192 192 0 1 0 0-384 192 192 0 0 0 0 384z" fill="#A0A0A0" p-id="2505"></path></svg>
                                <a th:href="@{/selectUserByGrade(grade='普通用户')}">普通用户</a>
                            </li>
                            <li>
                                <svg t="1612009034965" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2838" width="16" height="16"><path d="M498.2 577.5l-17.9-39-19.7 38.7c-2.7 5.3-7.7 8.9-13.6 9.7l-43.3 5.7 30.8 30.8c4.1 4.1 6 10 5 15.7l-7.9 42.9 38.7-19.7c3.1-1.6 6.6-2.2 10-1.8l-2.9-0.4c3 0 5.9 0.7 8.6 2.1l38.3 20.8-6.8-42.9c-0.9-5.8 1.1-11.7 5.4-15.7l31.5-30.1-42.9-6.8c-5.8-0.9-10.8-4.7-13.3-10z" fill="#f4ea2a" p-id="2839"></path><path d="M715.1 396.4V292.3c0-4.7-1.9-9.3-5.2-12.7-3.4-3.4-7.9-5.2-12.7-5.2H263.8c-3.5 0-6.9 0.9-9.9 2.7-5.3 3.3-8.4 9.1-8.4 15.2v96.6c0.1 4.7 2 9.2 5.4 12.5l64.2 63.9c-29.8 31.7-50.8 71.9-59 116.6-2 11-2.2 71.1-0.3 82 19 108.5 113.7 191 227.7 191 127.6-0.2 231-103.6 231.2-231.2 0-63.7-25.8-121.5-67.5-163.3l60.7-49.7c4.5-3.3 7.2-8.7 7.2-14.3zM604.9 596.1l-51.2 48.3 10.7 69.4c0.8 5.2-0.6 10.4-4 14.4s-8.3 6.3-13.5 6.3l2.1-0.4c-3 0-5.9-0.7-8.6-2.1l-60.1-33.6-62.6 31.9c-5.8 3.5-13.1 3.5-19 0-5.4-4.1-8-10.9-6.8-17.5l12.9-69.1-51.5-51.5c-4.8-4.8-6.5-12-4.3-18.4 2.2-6.5 7.9-11.1 14.7-12l69.8-8.9 32.2-62.6c2.5-5.9 8.2-9.8 14.7-10 6.8 0.2 12.9 4.2 15.7 10.4l30.1 63.7 69.4 11.1c6.7 1.1 12.3 5.9 14.3 12.5 1.9 6.4 0 13.5-5 18.1z" fill="#f4ea2a" p-id="2840"></path><path d="M675.1 366.4V262.3c0-4.7-1.9-9.3-5.2-12.7-3.4-3.4-7.9-5.2-12.7-5.2H223.8c-3.5 0-6.9 0.9-9.9 2.7-5.3 3.3-8.4 9.1-8.4 15.2v96.6c0.1 4.7 2 9.2 5.4 12.5l64.2 63.9c-29.8 31.7-50.8 71.9-59 116.6-2 11 6.4 21.1 17.6 21.1 8.6 0 16-6.1 17.6-14.6 2.4-13.5 6.3-26.9 11.7-39.9 30.2-73 101.5-120.6 180.5-120.6 107.8 0.2 195.2 87.6 195.4 195.4 0 79-47.6 150.3-120.6 180.5s-157.1 13.5-213-42.4c-28.9-28.9-47.3-65.4-54.2-103.9-1.5-8.5-9-14.6-17.6-14.6h-0.1c-11.1 0-19.5 10-17.6 20.9 19 108.5 113.7 191 227.7 191 127.6-0.2 231-103.6 231.2-231.2 0-63.7-25.8-121.5-67.5-163.3l60.7-49.7c4.5-3.2 7.2-8.6 7.2-14.2z m-330 18c-15.4 7.2-29.8 16.1-43.1 26.5l-60.7-59.1v-71.6h103.8v104.2z m161.1-13.3c-19.9-5.6-40.9-8.6-62.6-8.6s-42.7 3-62.6 8.6v-90.9h125.3l-0.1 90.9z m132.4-13.6l-59 49.3c-11.8-8.6-24.3-16.1-37.6-22.3V280.2h96.6v77.3z" fill="#f4ea2a" p-id="2841"></path><path d="M764.6 259.7l-22.3-2.3-14.5 17-4.7-21.9-20.6-8.6 19.4-11.2 1.7-22.3 16.7 15 21.7-5.2-9.1 20.4z" fill="#f4ea2a" p-id="2842"></path></svg>
                                <a th:href="@{/selectUserByGrade(grade='金牌用户')}">金牌用户</a>
                            </li>
                            <li>
                                <svg t="1612009113312" class="icon" viewBox="0 0 1086 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3744" width="16" height="16"><path d="M321.214785 391.8002l455.224775-2.045954-218.917083 550.361638zM373.386613 192.31968l346.789211 3.068931 61.378621 134.00999-450.10989-3.068931zM274.157842 322.237762l-274.157842-114.573427 147.308691-109.458541 175.952048 91.044955zM0 274.157842l259.836164 115.596404 279.272727 546.26973zM841.91009 388.731269l243.468531-125.826174-512.511489 670.04995zM836.795205 321.214785l-68.539461-141.170829 156.515485-86.953047 135.032967 113.55045zM368.271728 124.803197l-59.332667-15.344655-111.504496-62.401598 130.941059-47.056943 427.604396 0 129.918082 54.217782-124.803197 60.355644-41.942058 10.22977-350.881119 0z" p-id="3745" fill="#88b1c7"></path></svg>
                                <a th:href="@{/selectUserByGrade(grade='钻石用户')}">钻石用户</a>
                            </li>
                            <li>
                                <svg t="1612009113312" class="icon" viewBox="0 0 1086 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3744" width="16" height="16"><path d="M321.214785 391.8002l455.224775-2.045954-218.917083 550.361638zM373.386613 192.31968l346.789211 3.068931 61.378621 134.00999-450.10989-3.068931zM274.157842 322.237762l-274.157842-114.573427 147.308691-109.458541 175.952048 91.044955zM0 274.157842l259.836164 115.596404 279.272727 546.26973zM841.91009 388.731269l243.468531-125.826174-512.511489 670.04995zM836.795205 321.214785l-68.539461-141.170829 156.515485-86.953047 135.032967 113.55045zM368.271728 124.803197l-59.332667-15.344655-111.504496-62.401598 130.941059-47.056943 427.604396 0 129.918082 54.217782-124.803197 60.355644-41.942058 10.22977-350.881119 0z" p-id="3745" fill="#035ef5"></path></svg>                                <a th:href="@{/selectUserByGrade(grade='蓝钻用户')}">蓝钻用户</a>
                            </li>
                            <li>
                                <svg t="1612009113312" class="icon" viewBox="0 0 1086 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3744" width="16" height="16"><path d="M321.214785 391.8002l455.224775-2.045954-218.917083 550.361638zM373.386613 192.31968l346.789211 3.068931 61.378621 134.00999-450.10989-3.068931zM274.157842 322.237762l-274.157842-114.573427 147.308691-109.458541 175.952048 91.044955zM0 274.157842l259.836164 115.596404 279.272727 546.26973zM841.91009 388.731269l243.468531-125.826174-512.511489 670.04995zM836.795205 321.214785l-68.539461-141.170829 156.515485-86.953047 135.032967 113.55045zM368.271728 124.803197l-59.332667-15.344655-111.504496-62.401598 130.941059-47.056943 427.604396 0 129.918082 54.217782-124.803197 60.355644-41.942058 10.22977-350.881119 0z" p-id="3745" fill="#2c2c2c"></path></svg>
                                <a th:href="@{/selectUserByGrade(grade='黑钻用户')}">黑钻用户</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!--右侧样式-->
        <div class="page_right_style right_grading">
            <div class="Statistics_style" id="Statistic_pie">
                <div class="type_title">等级统计
                    <span class="top_show_btn Statistic_btn">显示</span>
                    <span class="Statistic_title Statistic_btn"><a title="隐藏" class="top_close_btn">隐藏</a></span>
                </div>
                <div id="Statistics" class="Statistics"></div>
            </div>
            <!--列表样式-->
            <div class="grading_list">
                <div class="type_title">全部会员等级列表</div>
                <div class="table_menu_list">
                    <table class="table table-striped table-bordered table-hover" id="sample-table">
                        <thead>
                        <tr style="font-size: 14px">
                            <th width="25"><label><input type="checkbox" class="ace"><span class="lbl"></span></label>
                            </th>
                            <th width="80">ID</th>
                            <th width="100">用户名</th>
                            <th width="80">性别</th>
                            <th width="120">手机</th>
                            <th width="150">邮箱</th>
                            <th width="180">注册日期</th>
                            <th width="100">等级</th>
                            <th width="100">积分</th>
                            <th width="70">状态</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="user:${userList}" style="font-size: 14px">
                            <td><label><input type="checkbox" class="ace"><span class="lbl"></span></label></td>
                            <td th:text="${user.id}"></td>
                            <td th:text="${user.nickname}"></td>
                            <td th:text="${user.gender}"></td>
                            <td th:text="${user.phone}"></td>
                            <td th:text="${user.email}"></td>
                            <td th:text="${user.registerDate}"></td>
                            <!--用户等级-->
                            <td th:if="${user.integral >= 100 && user.integral <= 300}">普通用户</td>
                            <td th:if="${user.integral > 300 && user.integral <= 500}">金牌用户</td>
                            <td th:if="${user.integral > 500 && user.integral <= 700}">钻石用户</td>
                            <td th:if="${user.integral > 700 && user.integral <= 900}">蓝钻用户</td>
                            <td th:if="${user.integral > 900}">黑钻用户</td>
                            <td class="text-l" th:text="${user.integral}"></td>
                            <td class="td-status"><span class="label label-success radius">正常</span></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $("#category").fix({
            float: 'left',
            //minStatue : true,
            skin: 'green',
            durationTime: false,
            spacingw: 20,
            spacingh: 240,
            set_scrollsidebar: '.right_grading',
        });
    });
    $(function () {
        $("#Statistic_pie").fix({
            float: 'top',
            //minStatue : true,
            skin: 'green',
            durationTime: false,
            spacingw: 0,
            spacingh: 0,
            close_btn: '.top_close_btn',
            show_btn: '.top_show_btn',
            side_list: '.Statistics',
            close_btn_width: 80,
            side_title: '.Statistic_title',
        });
    });

    /*用户-查看*/
    function member_show(title, url, id, w, h) {
        layer_show(title, url + '#?=' + id, w, h);
    }

    /*用户-停用*/
    function member_stop(obj, id) {
        layer.confirm('确认要停用吗？', function (index) {
            $(obj).parents("tr").find(".td-manage").prepend('<a style="text-decoration:none" class="btn btn-xs " onClick="member_start(this,id)" href="javascript:;" title="启用"><i class="fa fa-close bigger-120"></i></a>');
            $(obj).parents("tr").find(".td-status").html('<span class="label label-defaunt radius">已停用</span>');
            $(obj).remove();
            layer.msg('已停用!', {icon: 5, time: 1000});
        });
    }

    /*用户-启用*/
    function member_start(obj, id) {
        layer.confirm('确认要启用吗？', function (index) {
            $(obj).parents("tr").find(".td-manage").prepend('<a style="text-decoration:none" class="btn btn-xs btn-success" onClick="member_stop(this,id)" href="javascript:;" title="停用"><i class="fa fa-check  bigger-120"></i></a>');
            $(obj).parents("tr").find(".td-status").html('<span class="label label-success radius">已启用</span>');
            $(obj).remove();
            layer.msg('已启用!', {icon: 6, time: 1000});
        });
    }
</script>
<script type="text/javascript">
    //初始化宽度、高度
    $(".widget-box").height($(window).height());
    $(".page_right_style").width($(window).width() - 220);
    //$(".table_menu_list").width($(window).width()-240);
    //当文档窗口发生改变时 触发
    $(window).resize(function () {
        $(".widget-box").height($(window).height());
        $(".page_right_style").width($(window).width() - 220);
        //$(".table_menu_list").width($(window).width()-240);
    })
    /*等级图*/
    require.config({
        paths: {
            echarts: '/assets/dist'
        }
    });
    $(function () {
        $.ajax({
            url: '/grade',
            success: function (data) {
                require(
                    [
                        'echarts',
                        'echarts/theme/macarons',
                        'echarts/chart/pie',   // 按需加载所需图表，如需动态类型切换功能，别忘了同时加载相应图表
                        'echarts/chart/funnel'
                    ],
                    function (ec, theme) {
                        let myChart = ec.init(document.getElementById('Statistics'), theme);
                        let option = {
                            title: {
                                text: '用户等级人数统计',
                                subtext: '实时更新最新等级',
                                x: 'center'
                            },
                            tooltip: {
                                trigger: 'item',
                                formatter: "{a} <br/>{b} : {c} ({d}%)"
                            },
                            legend: {
                                x: 'center',
                                y: 'bottom',
                                data: ['普通用户','金牌用户', '钻石用户', '蓝钻用户', '黑钻用户']
                            },
                            toolbox: {
                                show: true,
                                feature: {
                                    mark: {show: false},
                                    dataView: {show: false, readOnly: true},
                                    magicType: {
                                        show: true,
                                        type: ['pie', 'funnel'],
                                        option: {
                                            funnel: {
                                                x: '25%',
                                                width: '50%',
                                                funnelAlign: 'left',
                                                max: 6200
                                            }
                                        }
                                    },
                                    restore: {show: true},
                                    saveAsImage: {show: true}
                                }
                            },
                            calculable: true,
                            series: [
                                {
                                    name: '品牌数量',
                                    type: 'pie',
                                    radius: '55%',
                                    center: ['50%', '60%'],
                                    data: data
                                }
                            ]
                        };
                        myChart.setOption(option);
                    }
                );
            }
        });
    });


</script>
<script type="text/javascript">
    $(function ($) {
        var oTable1 = $('#sample-table').dataTable({
            "aaSorting": [
                [
                    1, "desc"
                ]
            ],//默认第几个排序
            "bStateSave": true,//状态保存
            "aoColumnDefs": [
                //{"bVisible": false, "aTargets": [ 3 ]} //控制列的隐藏显示
                {"orderable": false, "aTargets": [0, 2, 3, 4, 5, 6, 7, 9]}// 制定列不参与排序
            ]
        });


        $('table th input:checkbox').on('click', function () {
            var that = this;
            $(this).closest('table').find('tr > td:first-child input:checkbox')
                .each(function () {
                    this.checked = that.checked;
                    $(this).closest('tr').toggleClass('selected');
                });

        });


        $('[data-rel="tooltip"]').tooltip({placement: tooltip_placement});

        function tooltip_placement(context, source) {
            var $source = $(source);
            var $parent = $source.closest('table')
            var off1 = $parent.offset();
            var w1 = $parent.width();

            var off2 = $source.offset();
            var w2 = $source.width();

            if (parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2)) return 'right';
            return 'left';
        }
    });
</script>
</body>
</html>
